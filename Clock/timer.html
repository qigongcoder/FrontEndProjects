<!DOCTYPE html>
<html>

  <head>
  </head>

  <body>
    <p>session</p>
    <button onclick="sessionIncrease()">UP</button>
    <button onclick="sessionDecrease()">DOWN</button>
    <p id="session-length">20:00</p>

    <p>break</p>
    <button onclick="breakIncrease()">UP</button>
    <button onclick="breakDecrease()">DOWN</button>
    <p id="break-length">05:00</p>

    <button onclick="startStop()">&#9654; / &#10074;&#10074;</button>
    <button onclick="restart()">restart</button>
    <p id="timer-label">session</p>
    <p id="timer-left">20:00</p>



  </body>

  <script>

    var myVar;
    var string;
    var session_length=7;
    var break_length=4;
    var current_val=session_length;
    var running=true;
    var session_type="session";
    var just_loaded=true;
    
    function startStop(){
      just_loaded=false;
      running=!running;
      if(running==false){
        start();
      }else{
        stop();
      }
    }

    function start(){
      current_val--;
      if(session_type=="session"){
        document.getElementById("timer-left").style.color = "red";
      }else{
        document.getElementById("timer-left").style.color = "green";        
      }
      document.getElementById("timer-left").innerHTML=convertSecToMin(current_val);
      myVar=setInterval(changeText, 1000);
    }

    function stop(){
      clearInterval(myVar);
      document.getElementById("timer-left").style.color = "black";
    }

    function end(){
      var audio = new Audio('beep.mp3');
      audio.play();
      clearInterval(myVar);
      if(session_type=="session"){
        session_type="break";
        document.getElementById("timer-label").innerHTML=session_type;
        document.getElementById("timer-left").style.color = "green";
        current_val=break_length;
      }else{
        session_type="session";
        document.getElementById("timer-label").innerHTML=session_type;
        current_val=session_length;
      }
      start();
    }


    function changeText(){
      current_val--;
      document.getElementById("timer-left").innerHTML=convertSecToMin(current_val);
      if(current_val==0){
        end();
      }
    }

    function restart(){
      clearInterval(myVar);
      current_val=session_length;
      just_loaded=true;
      document.getElementById("timer-left").style.color = "black";
      document.getElementById("timer-left").innerHTML=convertSecToMin(current_val);
    }


    function sessionIncrease(){
      if(session_length<3600){
        session_length=session_length+300;
        document.getElementById("session-length").innerHTML=convertSecToMin(session_length);
        if (just_loaded){
          current_val=session_length;
          document.getElementById("timer-left").innerHTML=convertSecToMin(current_val);
        }
      }
    }

    function sessionDecrease(){
      if(session_length>=600){
        session_length=session_length-300;
        document.getElementById("session-length").innerHTML=convertSecToMin(session_length);
        if (just_loaded){
          current_val=session_length;
          document.getElementById("timer-left").innerHTML=convertSecToMin(current_val);
        }
      }
    }

    function breakIncrease(){
      if(break_length<3600){
        break_length=break_length+60;
        document.getElementById("break-length").innerHTML=convertSecToMin(break_length);
      }
    }

    function breakDecrease(){
      if(break_length>60){
        break_length=break_length-60;
        document.getElementById("break-length").innerHTML=convertSecToMin(break_length);
      }
    }


    function convertSecToMin(secs){
      var min = Math.floor(secs/60).toString();
      min = (min.length == 1) ? "0" + min :min;
      var sec = (secs%60).toString();
      sec = (sec.length == 1) ? "0" + sec :sec;
      return min + ":" + sec;
}



  </script>
    
</html>


